@model List<CAS_MVC_4.Models.Student>

<table class="table table-hover table-responsive table-striped">
    <thead>
        <tr>
            <th>Scholar No</th>
            <th>Session</th>
            <th>Student Name</th>
            <th>Father Name</th>
            <th>Class</th>
            <th>Instalments Deposit</th>
        </tr>
    </thead>
    @if (Model == null || Model.Count == 0)
    {
        <tr>
            <td colspan="6" style="text-align:center">No Records Found</td>
        </tr>
    }
    else
    {
        foreach (var s in Model)
        {
            <tr>
                <td>@Html.ActionLink(s.ScholarNumber.ToString(), "Search", "Student", new { id = s.ScholarNumber }, null)</td>
                <td>@s.Session</td>
                <td>@s.StudentName</td>
                <td>@s.FatherName</td>
                <td>@s.Class (@s.Section)</td>
                <td>
                    @{
            using (var db = new CAS_MVC_4.Models.CentralAcademyContext())
            {
                var maxInst = db.FeeTransactions.Where(f => f.ScholarNumber == s.ScholarNumber).OrderByDescending(f => f.ToInstallment).FirstOrDefault();
                if (maxInst == null)
                {
                    @:0
                }
                else
                {
                    @maxInst.ToInstallment
                }
            }
                    }
                </td>
            </tr>
        }
    }
</table>